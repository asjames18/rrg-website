---
/**
 * Redirect from old admin-login to unified auth page
 * This handles any old bookmarks or links
 */
export const prerender = false;

// Get the redirect URL from query params
const url = new URL(Astro.request.url);
const redirectParam = url.searchParams.get('redirect');
const error = url.searchParams.get('error');

// Build the redirect URL
let redirectUrl = '/auth';
if (redirectParam) {
  redirectUrl += `?redirect=${encodeURIComponent(redirectParam)}`;
  if (error) {
    redirectUrl += `&error=${encodeURIComponent(error)}`;
  }
} else if (error) {
  redirectUrl += `?error=${encodeURIComponent(error)}`;
}

// Redirect to the unified auth page
return Astro.redirect(redirectUrl);
---
