import{j as e}from"./jsx-runtime.D3GSbgeI.js";import{r as a}from"./index.yGrMsBkE.js";import{s as l}from"./supabase.CM8HHm_J.js";import"./index.yBjzXJbu.js";import"./index.M9SNm6Va.js";import"./preload-helper.BlTxHScW.js";function N(){const[d,i]=a.useState(null),[t,c]=a.useState(null),[m,n]=a.useState(!0);a.useEffect(()=>{l.auth.getUser().then(({data:{user:r}})=>{i(r),r?u(r.id):n(!1)});const{data:{subscription:o}}=l.auth.onAuthStateChange(async(r,s)=>{i(s?.user??null),s?.user?await u(s.user.id):(c(null),n(!1))});return()=>o.unsubscribe()},[]);const u=async o=>{try{const{data:r,error:s}=await l.from("profiles").select("*").eq("id",o).single();if(s)throw s;c(r)}catch(r){console.error("Error fetching profile:",r)}finally{n(!1)}},b=async()=>{await l.auth.signOut()};return m?e.jsx("div",{className:"bg-neutral-900 border border-neutral-800 rounded-lg p-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-neutral-700 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-3 bg-neutral-700 rounded w-1/3"})]})}):d?e.jsxs("div",{className:"bg-gradient-to-r from-amber-900/20 to-amber-800/20 border border-amber-700/30 rounded-2xl p-8 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-amber-100 font-display",children:"Welcome back!"}),e.jsx("p",{className:"text-neutral-300 text-lg",children:d.email})]}),e.jsx("button",{onClick:b,className:"bg-neutral-800/80 hover:bg-neutral-700/80 text-neutral-200 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-lg",children:"Sign Out"})]}),t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-neutral-400 font-medium",children:"Role:"}),e.jsx("span",{className:`text-sm font-bold px-3 py-1.5 rounded-full ${t.role==="admin"?"bg-red-900/40 text-red-200 border border-red-700/50":t.role==="editor"?"bg-amber-900/40 text-amber-200 border border-amber-700/50":"bg-neutral-800/60 text-neutral-300 border border-neutral-700/50"}`,children:t.role.charAt(0).toUpperCase()+t.role.slice(1)})]}),t.role==="admin"&&e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-red-900/20 to-red-800/20 border border-red-700/30 rounded-xl",children:e.jsxs("p",{className:"text-sm text-red-200 font-medium",children:[e.jsx("strong",{className:"text-red-100",children:"Admin Access:"})," You can create, edit, and manage all content."]})}),t.role==="editor"&&e.jsx("div",{className:"mt-4 p-4 bg-gradient-to-r from-blue-900/20 to-blue-800/20 border border-blue-700/30 rounded-xl",children:e.jsxs("p",{className:"text-sm text-blue-200 font-medium",children:[e.jsx("strong",{className:"text-blue-100",children:"Editor Access:"})," You can create and edit content."]})})]})]}):null}export{N as default};
