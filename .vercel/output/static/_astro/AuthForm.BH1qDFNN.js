import{j as e}from"./jsx-runtime.ClP7wGfN.js";import{r as l}from"./index.DK-fsZOb.js";import{s as x}from"./supabase.CM8HHm_J.js";import"./index.M9SNm6Va.js";import"./preload-helper.BlTxHScW.js";function R({mode:w,onSuccess:y,onModeChange:N}){const[u,b]=l.useState(""),[o,h]=l.useState(""),[m,f]=l.useState(""),[g,p]=l.useState(!1),[d,r]=l.useState(null),[t,j]=l.useState(w),v=async s=>{s.preventDefault(),p(!0),r(null);try{if(t==="signup"){if(!o||!m){r({type:"error",text:"Please fill in all fields"});return}if(o!==m){r({type:"error",text:"Passwords do not match"});return}if(o.length<6){r({type:"error",text:"Password must be at least 6 characters"});return}const{data:a,error:i}=await x.auth.signUp({email:u,password:o});if(i)throw i;r({type:"success",text:"Check your email for the confirmation link!"})}else if(t==="signin"){const{data:a,error:i}=await x.auth.signInWithPassword({email:u,password:o});if(i)throw i;r({type:"success",text:"Successfully signed in!"}),y?.()}else if(t==="reset"){const{error:a}=await x.auth.resetPasswordForEmail(u);if(a)throw a;r({type:"success",text:"Password reset email sent!"})}}catch(a){r({type:"error",text:a instanceof Error?a.message:"An error occurred"})}finally{p(!1)}},n=s=>{j(s),r(null),b(""),h(""),f("")},c=()=>{d&&r(null)};return e.jsxs("div",{className:"max-w-md mx-auto bg-neutral-900/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex mb-8 bg-neutral-800/50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>n("signin"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${t==="signin"?"bg-amber-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200"}`,children:"Sign In"}),e.jsx("button",{onClick:()=>n("signup"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${t==="signup"?"bg-amber-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200"}`,children:"Sign Up"}),e.jsx("button",{onClick:()=>n("reset"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${t==="reset"?"bg-amber-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200"}`,children:"Reset"})]}),e.jsxs("h2",{className:"text-2xl font-bold text-amber-100 mb-6 text-center font-display",children:[t==="signin"&&"Welcome Back",t==="signup"&&"Create Your Account",t==="reset"&&"Reset Your Password"]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:u,onChange:s=>{b(s.target.value),c()},required:!0,className:"w-full px-4 py-3 bg-neutral-800/80 border border-neutral-600/50 rounded-lg text-neutral-100 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all duration-200",placeholder:"your@email.com"})]}),t!=="reset"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:o,onChange:s=>{h(s.target.value),c()},required:!0,className:"w-full px-4 py-3 bg-neutral-800/80 border border-neutral-600/50 rounded-lg text-neutral-100 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all duration-200",placeholder:"••••••••"})]}),t==="signup"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",type:"password",value:m,onChange:s=>{f(s.target.value),c()},required:!0,className:"w-full px-4 py-3 bg-neutral-800/80 border border-neutral-600/50 rounded-lg text-neutral-100 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all duration-200",placeholder:"••••••••"})]}),d&&e.jsx("div",{className:`p-4 rounded-lg text-sm font-medium ${d.type==="success"?"bg-green-900/20 border border-green-600/30 text-green-200":"bg-red-900/20 border border-red-600/30 text-red-200"}`,children:d.text}),e.jsx("button",{type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-500 hover:to-amber-600 disabled:from-neutral-700 disabled:to-neutral-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:ring-offset-2 focus:ring-offset-neutral-900 shadow-lg hover:shadow-xl disabled:shadow-none",children:g?"Loading...":t==="signin"?"Sign In":t==="signup"?"Create Account":"Send Reset Email"})]}),e.jsxs("div",{className:"mt-6 text-center",children:[t==="signin"&&e.jsxs("p",{className:"text-sm text-neutral-400",children:["New to Real & Raw Gospel?",e.jsx("button",{onClick:()=>n("signup"),className:"text-amber-400 hover:text-amber-300 ml-1 font-medium underline hover:no-underline transition-all duration-200",children:"Create an account"})]}),t==="signup"&&e.jsxs("p",{className:"text-sm text-neutral-400",children:["Already have an account?",e.jsx("button",{onClick:()=>n("signin"),className:"text-amber-400 hover:text-amber-300 ml-1 font-medium underline hover:no-underline transition-all duration-200",children:"Sign in"})]}),t==="reset"&&e.jsxs("p",{className:"text-sm text-neutral-400",children:["Remember your password?",e.jsx("button",{onClick:()=>n("signin"),className:"text-amber-400 hover:text-amber-300 ml-1 font-medium underline hover:no-underline transition-all duration-200",children:"Sign in"})]}),t==="signin"&&e.jsx("p",{className:"text-sm text-neutral-400 mt-2",children:e.jsx("button",{onClick:()=>n("reset"),className:"text-neutral-400 hover:text-neutral-200 font-medium underline hover:no-underline transition-all duration-200",children:"Forgot your password?"})})]})]})}export{R as default};
