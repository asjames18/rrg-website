import{j as e}from"./jsx-runtime.D3GSbgeI.js";import{r as a}from"./index.yGrMsBkE.js";import{s as l}from"./supabase.CM8HHm_J.js";import"./index.yBjzXJbu.js";import"./index.M9SNm6Va.js";import"./preload-helper.BlTxHScW.js";function w({showActions:x=!0,className:n=""}){const[o,c]=a.useState(null),[r,m]=a.useState(null),[b,d]=a.useState(!0);a.useEffect(()=>{l.auth.getUser().then(({data:{user:t}})=>{c(t),t?u(t.id):d(!1)});const{data:{subscription:i}}=l.auth.onAuthStateChange(async(t,s)=>{c(s?.user??null),s?.user?await u(s.user.id):(m(null),d(!1))});return()=>i.unsubscribe()},[]);const u=async i=>{try{const{data:t,error:s}=await l.from("profiles").select("*").eq("id",i).single();if(s)throw s;m(t)}catch(t){console.error("Error fetching profile:",t)}finally{d(!1)}},h=async()=>{await l.auth.signOut()};return b?e.jsx("div",{className:`bg-neutral-900/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-6 ${n}`,children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-neutral-700 rounded w-1/2 mb-4"}),e.jsx("div",{className:"h-4 bg-neutral-700 rounded w-1/3 mb-2"}),e.jsx("div",{className:"h-4 bg-neutral-700 rounded w-1/4"})]})}):o?e.jsxs("div",{className:`bg-gradient-to-r from-amber-900/20 to-amber-800/20 border border-amber-700/30 rounded-2xl p-8 backdrop-blur-sm ${n}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-2xl font-bold text-amber-100 font-display mb-2",children:"Welcome back!"}),e.jsx("p",{className:"text-neutral-300 text-lg mb-4",children:o.email}),r&&e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-sm text-neutral-400 font-medium",children:"Role:"}),e.jsx("span",{className:`text-sm font-bold px-3 py-1.5 rounded-full ${r.role==="admin"?"bg-red-900/40 text-red-200 border border-red-700/50":r.role==="editor"?"bg-amber-900/40 text-amber-200 border border-amber-700/50":"bg-neutral-800/60 text-neutral-300 border border-neutral-700/50"}`,children:r.role.charAt(0).toUpperCase()+r.role.slice(1)})]}),e.jsxs("div",{className:"text-sm text-neutral-400",children:["Member since ",new Date(o.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long"})]})]}),x&&e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("a",{href:"/profile",className:"bg-neutral-800/80 hover:bg-neutral-700/80 text-neutral-200 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-lg text-center",children:"View Profile"}),e.jsx("button",{onClick:h,className:"bg-red-900/40 hover:bg-red-800/40 text-red-200 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 hover:shadow-lg",children:"Sign Out"})]})]}),r&&e.jsxs("div",{className:"space-y-4",children:[r.role==="admin"&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-red-900/20 to-red-800/20 border border-red-700/30 rounded-xl",children:e.jsxs("p",{className:"text-sm text-red-200 font-medium",children:[e.jsx("strong",{className:"text-red-100",children:"Admin Access:"})," You can create, edit, and manage all content."]})}),r.role==="editor"&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-blue-900/20 to-blue-800/20 border border-blue-700/30 rounded-xl",children:e.jsxs("p",{className:"text-sm text-blue-200 font-medium",children:[e.jsx("strong",{className:"text-blue-100",children:"Editor Access:"})," You can create and edit content."]})}),r.role==="viewer"&&e.jsx("div",{className:"p-4 bg-gradient-to-r from-green-900/20 to-green-800/20 border border-green-700/30 rounded-xl",children:e.jsxs("p",{className:"text-sm text-green-200 font-medium",children:[e.jsx("strong",{className:"text-green-100",children:"Member Access:"})," You can view all content and save favorites."]})})]})]}):e.jsxs("div",{className:`bg-neutral-900/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-6 text-center ${n}`,children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-100 mb-2",children:"Not Signed In"}),e.jsx("p",{className:"text-neutral-400 mb-4",children:"Sign in to view your profile"}),e.jsx("a",{href:"/auth",className:"inline-block bg-amber-700 hover:bg-amber-600 text-white font-semibold px-4 py-2 rounded-lg transition-colors",children:"Sign In"})]})}export{w as default};
