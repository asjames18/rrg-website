const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.M9SNm6Va.js","_astro/preload-helper.BlTxHScW.js"])))=>i.map(i=>d[i]);
import{_ as l}from"./preload-helper.BlTxHScW.js";const d=document.getElementById("mobile-menu-toggle"),p=document.getElementById("mobile-menu");d?.addEventListener("click",()=>{const e=d.getAttribute("aria-expanded")==="true";d.setAttribute("aria-expanded",String(!e)),p?.classList.toggle("hidden")});async function E(){try{const{createClient:e}=await l(async()=>{const{createClient:a}=await import("./index.M9SNm6Va.js");return{createClient:a}},__vite__mapDeps([0,1])),t=e("https://lebumzszhhjlpflqgity.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYnVtenN6aGhqbHBmbHFnaXR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTk5NjgsImV4cCI6MjA3NTA3NTk2OH0.2XeY7OXkEfXiG_qwlSRN5rNE2gbZde42v4KfTrmctSs"),{data:{user:n}}=await t.auth.getUser();n?y(n.email||""):m()}catch(e){console.error("Auth check failed:",e),m()}}async function y(e){const i=document.getElementById("auth-nav-item"),s=document.getElementById("sign-in-nav-item"),t=document.getElementById("user-email"),n=document.getElementById("admin-links");i&&s&&t&&(i.classList.remove("hidden"),s.classList.add("hidden"),t.textContent=e);try{const{createClient:c}=await l(async()=>{const{createClient:o}=await import("./index.M9SNm6Va.js");return{createClient:o}},__vite__mapDeps([0,1])),I=c("https://lebumzszhhjlpflqgity.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYnVtenN6aGhqbHBmbHFnaXR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTk5NjgsImV4cCI6MjA3NTA3NTk2OH0.2XeY7OXkEfXiG_qwlSRN5rNE2gbZde42v4KfTrmctSs"),{data:{user:g}}=await I.auth.getUser();if(g){const{data:o}=await I.from("profiles").select("role").eq("id",g.id).single(),h=o?.role==="admin"||o?.role==="editor";n&&(h?n.classList.remove("hidden"):n.classList.add("hidden"))}}catch(c){console.error("Error checking admin status:",c)}const a=document.getElementById("mobile-auth-nav-item"),r=document.getElementById("mobile-sign-in-nav-item"),u=document.getElementById("mobile-user-email");a&&r&&u&&(a.classList.remove("hidden"),r.classList.add("hidden"),u.textContent=e)}function m(){const e=document.getElementById("auth-nav-item"),i=document.getElementById("sign-in-nav-item");e&&i&&(e.classList.add("hidden"),i.classList.remove("hidden"));const s=document.getElementById("mobile-auth-nav-item"),t=document.getElementById("mobile-sign-in-nav-item");s&&t&&(s.classList.add("hidden"),t.classList.remove("hidden"))}async function b(){try{const{createClient:e}=await l(async()=>{const{createClient:n}=await import("./index.M9SNm6Va.js");return{createClient:n}},__vite__mapDeps([0,1]));await e("https://lebumzszhhjlpflqgity.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYnVtenN6aGhqbHBmbHFnaXR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTk5NjgsImV4cCI6MjA3NTA3NTk2OH0.2XeY7OXkEfXiG_qwlSRN5rNE2gbZde42v4KfTrmctSs").auth.signOut(),m(),window.location.href="/"}catch(e){console.error("Sign out failed:",e)}}document.addEventListener("DOMContentLoaded",()=>{E(),document.getElementById("sign-out-btn")?.addEventListener("click",b),document.getElementById("mobile-sign-out-btn")?.addEventListener("click",b);const s=document.getElementById("user-menu-button"),t=document.getElementById("user-dropdown");s?.addEventListener("click",n=>{n.stopPropagation(),t?.classList.toggle("hidden")}),document.addEventListener("click",()=>{t?.classList.add("hidden")})});
