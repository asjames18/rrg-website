import{j as e}from"./jsx-runtime.D3GSbgeI.js";import{r as l}from"./index.yGrMsBkE.js";import{s as c}from"./supabase.CM8HHm_J.js";import"./index.yBjzXJbu.js";import"./index.M9SNm6Va.js";import"./preload-helper.BlTxHScW.js";function E({mode:p,onSuccess:w}){const[i,x]=l.useState(""),[o,b]=l.useState(""),[d,h]=l.useState(""),[f,g]=l.useState(!1),[u,s]=l.useState(null),[t,y]=l.useState(p),j=async n=>{n.preventDefault(),g(!0),s(null);try{if(t==="signup"){if(!o||!d){s({type:"error",text:"Please fill in all fields"});return}if(o!==d){s({type:"error",text:"Passwords do not match"});return}if(o.length<6){s({type:"error",text:"Password must be at least 6 characters"});return}const{error:r}=await c.auth.signUp({email:i,password:o});if(r)throw r;s({type:"success",text:"Check your email for the confirmation link!"})}else if(t==="signin"){const{error:r}=await c.auth.signInWithPassword({email:i,password:o});if(r)throw r;s({type:"success",text:"Successfully signed in!"}),w?.()}else if(t==="reset"){const{error:r}=await c.auth.resetPasswordForEmail(i);if(r)throw r;s({type:"success",text:"Password reset email sent!"})}}catch(r){s({type:"error",text:r instanceof Error?r.message:"An error occurred"})}finally{g(!1)}},a=n=>{y(n),s(null),x(""),b(""),h("")},m=()=>{u&&s(null)};return e.jsxs("div",{className:"max-w-md mx-auto bg-neutral-900/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8 shadow-2xl",children:[e.jsxs("div",{className:"flex mb-8 bg-neutral-800/50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>a("signin"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${t==="signin"?"bg-amber-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200"}`,children:"Sign In"}),e.jsx("button",{onClick:()=>a("signup"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${t==="signup"?"bg-amber-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200"}`,children:"Sign Up"}),e.jsx("button",{onClick:()=>a("reset"),className:`flex-1 py-2 px-4 rounded-md text-sm font-medium transition-all duration-200 ${t==="reset"?"bg-amber-600 text-white shadow-lg":"text-neutral-400 hover:text-neutral-200"}`,children:"Reset"})]}),e.jsxs("h2",{className:"text-2xl font-bold text-amber-100 mb-6 text-center font-display",children:[t==="signin"&&"Welcome Back",t==="signup"&&"Create Your Account",t==="reset"&&"Reset Your Password"]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Email"}),e.jsx("input",{id:"email",type:"email",value:i,onChange:n=>{x(n.target.value),m()},required:!0,className:"w-full px-4 py-3 bg-neutral-800/80 border border-neutral-600/50 rounded-lg text-neutral-100 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all duration-200",placeholder:"your@email.com"})]}),t!=="reset"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Password"}),e.jsx("input",{id:"password",type:"password",value:o,onChange:n=>{b(n.target.value),m()},required:!0,className:"w-full px-4 py-3 bg-neutral-800/80 border border-neutral-600/50 rounded-lg text-neutral-100 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all duration-200",placeholder:"••••••••"})]}),t==="signup"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-neutral-200 mb-2",children:"Confirm Password"}),e.jsx("input",{id:"confirmPassword",type:"password",value:d,onChange:n=>{h(n.target.value),m()},required:!0,className:"w-full px-4 py-3 bg-neutral-800/80 border border-neutral-600/50 rounded-lg text-neutral-100 placeholder-neutral-400 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:border-amber-500/50 transition-all duration-200",placeholder:"••••••••"})]}),u&&e.jsx("div",{className:`p-4 rounded-lg text-sm font-medium ${u.type==="success"?"bg-green-900/20 border border-green-600/30 text-green-200":"bg-red-900/20 border border-red-600/30 text-red-200"}`,children:u.text}),e.jsx("button",{type:"submit",disabled:f,className:"w-full bg-gradient-to-r from-amber-600 to-amber-700 hover:from-amber-500 hover:to-amber-600 disabled:from-neutral-700 disabled:to-neutral-800 text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-amber-500/50 focus:ring-offset-2 focus:ring-offset-neutral-900 shadow-lg hover:shadow-xl disabled:shadow-none",children:f?"Loading...":t==="signin"?"Sign In":t==="signup"?"Create Account":"Send Reset Email"})]}),e.jsxs("div",{className:"mt-6 text-center",children:[t==="signin"&&e.jsxs("p",{className:"text-sm text-neutral-400",children:["New to Real & Raw Gospel?",e.jsx("button",{onClick:()=>a("signup"),className:"text-amber-400 hover:text-amber-300 ml-1 font-medium underline hover:no-underline transition-all duration-200",children:"Create an account"})]}),t==="signup"&&e.jsxs("p",{className:"text-sm text-neutral-400",children:["Already have an account?",e.jsx("button",{onClick:()=>a("signin"),className:"text-amber-400 hover:text-amber-300 ml-1 font-medium underline hover:no-underline transition-all duration-200",children:"Sign in"})]}),t==="reset"&&e.jsxs("p",{className:"text-sm text-neutral-400",children:["Remember your password?",e.jsx("button",{onClick:()=>a("signin"),className:"text-amber-400 hover:text-amber-300 ml-1 font-medium underline hover:no-underline transition-all duration-200",children:"Sign in"})]}),t==="signin"&&e.jsx("p",{className:"text-sm text-neutral-400 mt-2",children:e.jsx("button",{onClick:()=>a("reset"),className:"text-neutral-400 hover:text-neutral-200 font-medium underline hover:no-underline transition-all duration-200",children:"Forgot your password?"})})]})]})}export{E as default};
