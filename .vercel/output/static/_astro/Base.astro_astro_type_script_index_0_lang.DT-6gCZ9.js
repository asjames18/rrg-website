const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["_astro/index.M9SNm6Va.js","_astro/preload-helper.BlTxHScW.js"])))=>i.map(i=>d[i]);
import{_ as r}from"./preload-helper.BlTxHScW.js";const o=document.getElementById("mobile-menu-toggle"),d=document.getElementById("mobile-menu");o?.addEventListener("click",e=>{e.stopPropagation();const t=o.getAttribute("aria-expanded")==="true";o.setAttribute("aria-expanded",String(!t)),d?.classList.toggle("hidden")});document.addEventListener("click",e=>{const t=e.target;d&&!d.contains(t)&&!o?.contains(t)&&(d.classList.add("hidden"),o?.setAttribute("aria-expanded","false"))});async function E(){try{const{createClient:e}=await r(async()=>{const{createClient:a}=await import("./index.M9SNm6Va.js");return{createClient:a}},__vite__mapDeps([0,1])),n=e("https://lebumzszhhjlpflqgity.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYnVtenN6aGhqbHBmbHFnaXR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTk5NjgsImV4cCI6MjA3NTA3NTk2OH0.2XeY7OXkEfXiG_qwlSRN5rNE2gbZde42v4KfTrmctSs"),{data:{user:s}}=await n.auth.getUser();s?y(s.email||""):l()}catch(e){console.error("Auth check failed:",e),l()}}async function y(e){const t=document.getElementById("auth-nav-item"),i=document.getElementById("sign-in-nav-item"),n=document.getElementById("user-email"),s=document.getElementById("admin-links");t&&i&&n&&(t.classList.remove("hidden"),i.classList.add("hidden"),n.textContent=e);try{const{createClient:m}=await r(async()=>{const{createClient:c}=await import("./index.M9SNm6Va.js");return{createClient:c}},__vite__mapDeps([0,1])),g=m("https://lebumzszhhjlpflqgity.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYnVtenN6aGhqbHBmbHFnaXR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTk5NjgsImV4cCI6MjA3NTA3NTk2OH0.2XeY7OXkEfXiG_qwlSRN5rNE2gbZde42v4KfTrmctSs"),{data:{user:b}}=await g.auth.getUser();if(b){const{data:c}=await g.from("profiles").select("role").eq("id",b.id).single(),p=c?.role==="admin"||c?.role==="editor";s&&(p?s.classList.remove("hidden"):s.classList.add("hidden"))}}catch(m){console.error("Error checking admin status:",m)}const a=document.getElementById("mobile-auth-nav-item"),u=document.getElementById("mobile-sign-in-nav-item"),I=document.getElementById("mobile-user-email");a&&u&&I&&(a.classList.remove("hidden"),u.classList.add("hidden"),I.textContent=e)}function l(){const e=document.getElementById("auth-nav-item"),t=document.getElementById("sign-in-nav-item");e&&t&&(e.classList.add("hidden"),t.classList.remove("hidden"));const i=document.getElementById("mobile-auth-nav-item"),n=document.getElementById("mobile-sign-in-nav-item");i&&n&&(i.classList.add("hidden"),n.classList.remove("hidden"))}async function h(){try{const{createClient:e}=await r(async()=>{const{createClient:s}=await import("./index.M9SNm6Va.js");return{createClient:s}},__vite__mapDeps([0,1]));await e("https://lebumzszhhjlpflqgity.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxlYnVtenN6aGhqbHBmbHFnaXR5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk0OTk5NjgsImV4cCI6MjA3NTA3NTk2OH0.2XeY7OXkEfXiG_qwlSRN5rNE2gbZde42v4KfTrmctSs").auth.signOut(),l(),window.location.href="/"}catch(e){console.error("Sign out failed:",e)}}document.addEventListener("DOMContentLoaded",()=>{E(),document.getElementById("sign-out-btn")?.addEventListener("click",h),document.getElementById("mobile-sign-out-btn")?.addEventListener("click",h);const i=document.getElementById("user-menu-button"),n=document.getElementById("user-dropdown");i?.addEventListener("click",s=>{s.stopPropagation(),n?.classList.toggle("hidden")}),document.addEventListener("click",s=>{const a=s.target;n&&!n.contains(a)&&!i?.contains(a)&&n.classList.add("hidden")})});
